(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function o(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function n(t){var o=function(t){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var n=o.call(t,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(o)?o:o+""}const r=o((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jQuery("#pp-options-module-help .pp-docs-hide").hide(),jQuery("#pp-options-module-help .pp-docs-title").on("click",(function(){jQuery(this).toggleClass("pp-toggle"),jQuery(this).next().slideToggle("fast")})),jQuery("#pp-options-module-toolkit .pp-toolkit-content").hide(),jQuery("#pp-options-module-toolkit .pp-toolkit-title").on("click",(function(){jQuery(this).toggleClass("pp-toggle"),jQuery(this).next().slideToggle("fast")})),jQuery(".pp-hidden-settings").hide(),jQuery(".pp-hidden-settings-title").on("click",(function(){jQuery(this).toggleClass("pp-toggle"),jQuery(this).next().slideToggle("fast")}))}));function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function s(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function p(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=i(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}const a=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=window.ppjsAdminOpt||{},this.adminPage=jQuery("#pp-options-page"),this.index=jQuery(".select-pp-feed-index").first(),this.refresh=jQuery(".pp-feed-refresh"),this.reset=jQuery(".pp-feed-reset"),this.feedback=jQuery(".pp-toolkit-feedback").first(),this.newFeedback=jQuery("#pp-action-feedback"),this.managePodcastList=this.adminPage.find(".pp-podcasts-list"),this.events()},t=[{key:"events",value:function(){var e=this,t=this;this.refresh.on("click",function(){this.ajaxFeedEditor("refresh")}.bind(this)),this.reset.on("click",function(){this.ajaxFeedEditor("reset")}.bind(this)),jQuery(".pp-feed-del").on("click",(function(){t.index.val()?(jQuery(this).next(".pp-toolkit-del-confirm").slideDown("fast"),t.response()):t.response(t.data.messages.nourl,"pp-error")})),jQuery(".pp-feed-cancel").on("click",(function(){jQuery(this).parents(".pp-toolkit-del-confirm").hide()})),this.managePodcastList.on("click",".pp-podcast-refresh-btn",(function(t){var o=jQuery(t.currentTarget);e.feedRefreshDelete("refresh",o)})),this.managePodcastList.on("click",".pp-podcast-delete-btn",(function(t){var o=jQuery(t.currentTarget);e.feedRefreshDelete("reset",o)})),this.newFeedback.on("click",".pp-error-close",(function(t){e.newFeedback.removeClass("pp-error")}))}},{key:"ajaxFeedEditor",value:function(e){var t=this,o=this.getAjaxConfig(e);this.response(this.data.messages.running,"pp-running"),o?jQuery.ajax({url:this.data.ajaxurl,data:o,type:"POST",timeout:6e4,success:function(e){var o=JSON.parse(e);jQuery.isEmptyObject(o)||(void 0!==o.error?t.response(o.error,"pp-error"):void 0!==o.message&&t.response(o.message,"pp-success"))},error:function(e,o,n){t.response(n,"pp-error")}}):this.response(this.data.messages.nourl,"pp-error")}},{key:"feedRefreshDelete",value:function(e,t){var o=this,n=t.closest(".pp-podcast-list-item"),r=n.data("podcast"),i={action:"pp_feed_editor",security:this.data.security,atype:e,feedUrl:r};t.addClass("pp-wip"),this.managePodcastList.find(".pp-toolkit-buttons").prop("disabled",!0),jQuery.ajax({url:this.data.ajaxurl,data:i,type:"POST",timeout:6e4,success:function(r){var i=JSON.parse(r);jQuery.isEmptyObject(i)||(void 0!==i.error?o.newResponse(i.error,"pp-error"):void 0!==i.message&&(o.newResponse(i.message,"pp-success"),"reset"==e&&n.fadeOut(200,(function(){jQuery(this).remove()}))),t.removeClass("pp-wip"),setTimeout((function(){o.managePodcastList.find(".pp-toolkit-buttons").prop("disabled",!1)}),1500))},error:function(e,n,r){o.newResponse(r,"pp-error"),t.removeClass("pp-wip"),o.managePodcastList.find(".pp-toolkit-buttons").prop("disabled",!1)}})}},{key:"getAjaxConfig",value:function(e){var t=this.index.val();return!!t&&{action:"pp_feed_editor",security:this.data.security,atype:e,feedUrl:t}}},{key:"response",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.feedback.removeClass("pp-error pp-success pp-running"),!1!==t&&(this.feedback.addClass(t),this.feedback.find(".pp-feedback").text(e))}},{key:"newResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.newFeedback.removeClass("pp-error pp-success pp-running"),!1!==t&&(this.newFeedback.addClass(t),this.newFeedback.find(".pp-feedback").text(e)),setTimeout(function(){this.newFeedback.removeClass("pp-success pp-running")}.bind(this),1500)}}],t&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function l(e){var t=function(e){if("object"!=c(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}const d=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=window.ppjsAdminOpt||{},this.adminPage=jQuery("#pp-options-page"),this.openSourceUrlBtn=this.adminPage.find(".pp-podcast-source-btn"),this.addSourceUrlBtn=this.adminPage.find(".pp-podcast-new-source-btn"),this.delSourceBtn=this.adminPage.find(".pp-podcast-delete-source-url"),this.newFeedback=jQuery("#pp-action-feedback"),this.events()},t=[{key:"events",value:function(){var e=this;this.openSourceUrlBtn.on("click",(function(e){jQuery(this).closest(".pp-podcast-info").find(".pp-podcast-source-container").slideToggle("fast")})),this.addSourceUrlBtn.on("click",(function(t){var o=jQuery(this),n=o.closest(".pp-podcast-source-container"),r=n.find(".pp-podcast-existing-source"),i=r.find(".pp-podcast-existing-source-url"),s=n.find(".pp-podcast-new-source"),p=s.find(".pp-podcast-new-source-url"),a=p.val();if(a){var c=s.closest(".pp-podcast-list-item").data("podcast"),u={action:"pp_migrate_podcast",security:e.data.security,podcast_id:c,source_url:a};p.attr("disabled",!0),o.attr("disabled",!0),jQuery.ajax({url:e.data.ajaxurl,data:u,type:"POST",timeout:6e4,success:function(t){var n=JSON.parse(t);jQuery.isEmptyObject(n)||(void 0!==n.error?e.newResponse(n.error,"pp-error"):void 0!==n.message&&(i.html(a),r.show(),p.val(""),e.newResponse(n.message,"pp-success"))),p.attr("disabled",!1),o.attr("disabled",!1)},error:function(t,n,r){p.attr("disabled",!1),o.attr("disabled",!1),e.newResponse(r,"pp-error")}})}else e.newResponse(e.data.messages.nosource,"pp-error")})),this.delSourceBtn.on("click",(function(t){t.preventDefault();var o=jQuery(this),n=o.closest(".pp-podcast-existing-source"),r=n.find(".pp-podcast-existing-source-url"),i={action:"pp_delete_source",podcast_id:o.closest(".pp-podcast-list-item").data("podcast"),security:e.data.security};o.attr("disabled",!0),jQuery.ajax({url:e.data.ajaxurl,data:i,type:"POST",timeout:6e4,success:function(t){var i=JSON.parse(t);jQuery.isEmptyObject(i)||(void 0!==i.error?e.newResponse(i.error,"pp-error"):void 0!==i.message&&(r.empty(),n.hide(),e.newResponse(i.message,"pp-success"))),o.attr("disabled",!1)},error:function(t,n,r){o.attr("disabled",!1),e.newResponse(r,"pp-error")}})}))}},{key:"newResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.newFeedback.removeClass("pp-error pp-success pp-running"),!1!==t&&(this.newFeedback.addClass(t),this.newFeedback.find(".pp-feedback").text(e)),setTimeout(function(){this.newFeedback.removeClass("pp-success pp-running")}.bind(this),1500)}}],t&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function y(e){var t=function(e){if("object"!=f(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=f(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}const v=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=window.ppjsAdminOpt||{},this.newFeedback=jQuery("#pp-action-feedback"),this.serverTimeOut=null,this.events()},t=[{key:"events",value:function(){var e=this,t=jQuery("#pp-options-module-shortcode");jQuery(document),t.on("change",".pp-getval",(function(){clearTimeout(e.serverTimeOut),e.serverTimeOut=setTimeout((function(){e.updatePreview(jQuery(this))}),100)})),t.on("click","#pp-shortcode-generator-btn",(function(){e.blankShortcodeTemplate(jQuery(this))})),t.on("click","#pp-shortcode-generator-submit-btn",(function(){e.createNewShortcode(jQuery(this))})),t.on("click","#pp-shortcode-generator-delete-btn",(function(){e.deleteShortcode(jQuery(this))})),t.on("click","#pp-shortcode-generator-update-btn",(function(){e.updateShortcode(jQuery(this))})),t.on("change","select.pp-shortcode-dropdown",(function(){e.loadShortcode(jQuery(this))})),t.on("click",".pp-collapse-sidebar",(function(t){t.preventDefault(),e.toggleSidebar(jQuery(this))})),t.on("click",".pp-copy-shortcode-text",(function(t){t.preventDefault(),e.copyShortcodeText(jQuery(this))}))}},{key:"getShortcodeFormValues",value:function(){var e=jQuery("#pp-shortcode-form"),t=e.find(".pp-getval"),o=e.data("instance"),n={};return t.each((function(){var e=this.name.replace(/^pp_field_name_/,"");e.endsWith("[]")?(e=e.replace(/\[\]$/,""),Array.isArray(n[e])||(n[e]=[]),"checkbox"===this.type?n[e].push(this.checked?this.value:""):n[e].push(this.value)):"checkbox"===this.type?n[e]=this.checked?this.value:"":n[e]=this.value})),console.log(o),{instance:o,values:n}}},{key:"updatePreview",value:function(e){var t=this,o=this,n=this.getShortcodeFormValues(),r=(n.instance,n.values);jQuery.ajax({url:this.data.ajaxurl,data:{action:"pp_render_preview",security:this.data.security,data:r},type:"POST",timeout:6e4,success:function(e){var n=JSON.parse(e);jQuery.isEmptyObject(n)||(void 0!==n.error?t.newResponse(n.error,"pp-error"):void 0!==n.markup&&(jQuery("#pp-shortcode-preview").html(n.markup),o.updateFont()))},error:function(e,o,n){t.newResponse(n,"dpt-error")}})}},{key:"blankShortcodeTemplate",value:function(e){var t=this;e.siblings("select.pp-shortcode-dropdown").val(""),jQuery.ajax({url:this.data.ajaxurl,data:{action:"pp_blank_shortcode_template",security:this.data.security},type:"POST",timeout:6e4,success:function(e){var o=JSON.parse(e);if(!jQuery.isEmptyObject(o))if(void 0!==o.error)t.newResponse(o.error,"dpt-error");else if(void 0!==o.form&&void 0!==o.instance){var n='\n\t\t\t\t\t\t<div class="pp-shortcode-form-wrapper">'.concat(o.form,'</div>\n\t\t\t\t\t\t<div class="pp-shortcode-form-submit">\n\t\t\t\t\t\t\t<button id="pp-shortcode-generator-submit-btn" class="button button-secondary" style="width: 100%;">Generate Shortcode</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'),r=jQuery("#pp-shortcode-form"),i=jQuery("#pp-shortcode-preview");jQuery(".pp-shortcode-result").html(""),r.html(n).data("instance",o.instance),i.html('\n\t\t\t\t\t\t<div style="padding: 20px; font-size: 20px; color: #aaa;">\n\t\t\t\t\t\t\t<span>Shortcode</span>\n\t\t\t\t\t\t\t<span style="color: #333;">Preview</span>\n\t\t\t\t\t\t\t<span> will be displayed here.</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'),jQuery(document).trigger("pp-widget-added"),t.newResponse("Shortcode template created successfully","pp-success")}},error:function(e,o,n){t.newResponse(n,"pp-error")}})}},{key:"createNewShortcode",value:function(){var e=this,t=this.getShortcodeFormValues(),o=t.instance,n=t.values,r=n.title||"Podcast Player Shortcode "+(o+1);jQuery.ajax({url:this.data.ajaxurl,data:{action:"pp_create_new_shortcode",security:this.data.security,data:n,instance:o},type:"POST",timeout:6e4,success:function(t){var n=JSON.parse(t);if(!jQuery.isEmptyObject(n))if(void 0!==n.error)e.newResponse(n.error,"pp-error");else if(void 0!==n.success){var i=jQuery("#pp-options-module-shortcode"),s=i.find(".pp-shortcode-action"),p=i.find("select.pp-shortcode-dropdown");0===p.length&&(s.append('\n\t\t\t\t\t\t\t\t<span class="pp-separator">or</span>\n\t\t\t\t\t\t\t\t<select class="pp-shortcode-dropdown">\n\t\t\t\t\t\t\t\t\t<option value="" selected="selected">Select a Shortcode to Edit</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t'),p=i.find("select.pp-shortcode-dropdown")),p.append('<option value="'.concat(o,'">').concat(r,"</option>")),p.val(o),p.trigger("change"),e.newResponse("New shortcode created successfully","pp-success")}},error:function(t,o,n){e.newResponse(n,"pp-error")}})}},{key:"loadShortcode",value:function(e){var t=this,o=this,n=e.val();if(!n)return jQuery("#pp-shortcode-form").html(""),jQuery("#pp-shortcode-preview").html('\n\t\t\t\t<div style="padding: 20px; font-size: 20px; color: #aaa;">\n\t\t\t\t\t<span>Create a </span>\n\t\t\t\t\t<span style="color: #333;">New Shortcode</span>\n\t\t\t\t\t<span> or </span>\n\t\t\t\t\t<span style="color: #333;">Edit an Existing</span>\n\t\t\t\t\t<span> Shortcode using the menu above.</span>\n\t\t\t\t</div>\n\t\t\t'),void jQuery(".pp-shortcode-result").html("");jQuery.ajax({url:this.data.ajaxurl,data:{action:"pp_load_shortcode",security:this.data.security,instance:n},type:"POST",timeout:6e4,success:function(e){var n=JSON.parse(e);if(!jQuery.isEmptyObject(n))if(void 0!==n.error)t.newResponse(n.error,"pp-error");else if(void 0!==n.form&&void 0!==n.preview){var r='\n\t\t\t\t\t\t<div class="pp-shortcode-form-wrapper">'.concat(n.form,'</div>\n\t\t\t\t\t\t<div class="pp-shortcode-form-update pp-button-wrapper">\n\t\t\t\t\t\t\t<button id="pp-shortcode-generator-update-btn" class="button button-secondary" style="width: 100%;">Update Shortcode</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="pp-shortcode-form-delete pp-button-wrapper">\n\t\t\t\t\t\t\t<button id="pp-shortcode-generator-delete-btn" class="button button-secondary" style="width: 100%;">Delete Shortcode</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t'),i="\n\t\t\t\t\t\t".concat(n.preview,"\n\t\t\t\t\t\t"),s=jQuery(".pp-shortcode-result"),p=jQuery("#pp-shortcode-form"),a=jQuery("#pp-shortcode-preview");p.html(r).data("instance",n.instance),a.html(i),s.html('\n\t\t\t\t\t\t\t<div class="pp-shortcode-sidebar-collapse">\n\t\t\t\t\t\t\t\t<a href="#" class="pp-collapse-sidebar">\n\t\t\t\t\t\t\t\t\t<span class="dashicons dashicons-arrow-left-alt2"></span>\n\t\t\t\t\t\t\t\t\t<span class="pp-collapse-side">Collapse</span>\n\t\t\t\t\t\t\t\t\t<span class="pp-expand-side" style="display: none;">Expand</span>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="pp-shortcode-copy">\n\t\t\t\t\t\t\t\t<span>Your shortcode is </span>\n\t\t\t\t\t\t\t\t<pre class="pp-shortcode-text"><code>[showpodcastplayer instance="'.concat(n.instance,'"]</code></pre>\n\t\t\t\t\t\t\t\t<a href="#" class="pp-copy-shortcode-text">(Copy shortcode)</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t')),o.updateFont(),jQuery(document).trigger("pp-widget-added")}},error:function(e,o,n){t.newResponse(n,"pp-error")}})}},{key:"updateFont",value:function(){var e=jQuery("#pp-options-module-shortcode .podcast-player-pp-fonts");if(e.length){var t=e.val(),o=this.data.gfonts,n=!(!t||!o[t])&&o[t];if(n){var r=n.split(" ").join("+");if(0===jQuery("link#podcast-player-fonts-css-temp").length){var i=jQuery("<link>",{id:"podcast-player-fonts-css-temp",href:"//fonts.googleapis.com/css?family="+r,rel:"stylesheet",type:"text/css"});jQuery("link:last").after(i)}else{var s=jQuery("link#podcast-player-fonts-css-temp"),p=s.attr("href");s.attr("href",p+"%7C"+r)}}}}},{key:"deleteShortcode",value:function(e){var t=this,o=jQuery("#pp-options-module-shortcode"),n=o.find("#pp-shortcode-form").data("instance"),r=o.find("select.pp-shortcode-dropdown");void 0!==n&&(o.find(".pp-shortcode-result").html(""),jQuery.ajax({url:this.data.ajaxurl,data:{action:"pp_delete_shortcode",security:this.data.security,instance:n},type:"POST",timeout:6e4,success:function(e){var o=JSON.parse(e);jQuery.isEmptyObject(o)||(void 0!==o.error?t.newResponse(o.error,"pp-error"):void 0!==o.success&&(r.val(""),r.find('option[value="'.concat(n,'"]')).remove(),0===r.find("option").length?r.remove():r.trigger("change"),t.newResponse("Shortcode deleted successfully","pp-success",!0)))},error:function(e,o,n){t.newResponse(n,"pp-error")}}))}},{key:"updateShortcode",value:function(e){var t=this,o=this.getShortcodeFormValues(),n=o.instance,r=o.values;r.title&&jQuery(".pp-shortcode-dropdown option:selected").text(r.title),jQuery.ajax({url:this.data.ajaxurl,data:{action:"pp_update_shortcode",security:this.data.security,data:r,instance:n},type:"POST",timeout:6e4,success:function(e){var o=JSON.parse(e);jQuery.isEmptyObject(o)||(void 0!==o.error?t.newResponse(o.error,"pp-error"):void 0!==o.success&&t.newResponse("Shortcode updated successfully","pp-success"))},error:function(e,o,n){t.newResponse(n,"pp-error")}})}},{key:"newResponse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.newFeedback.removeClass("pp-error pp-success pp-running"),!1!==t&&(this.newFeedback.addClass(t),this.newFeedback.find(".pp-feedback").text(e)),setTimeout(function(){this.newFeedback.removeClass("pp-success pp-running"),o&&window.location.reload()}.bind(this),1e3)}},{key:"toggleSidebar",value:function(e){jQuery("#pp-shortcode-form").toggleClass("pp-sidebar-close"),e.toggleClass("pp-sidebar-close"),window.dispatchEvent(new Event("resize"))}},{key:"copyShortcodeText",value:function(e){var t=e.closest(".pp-shortcode-copy").find(".pp-shortcode-text code").text(),o=jQuery("<textarea>");jQuery("body").append(o),o.val(t).select(),document.execCommand("copy"),o.remove(),this.newResponse("Shortcode copied to clipboard","pp-success")}}],t&&h(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,b(n.key),n)}}function b(e){var t=function(e){if("object"!=m(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=m(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==m(t)?t:t+""}const j=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events()},t=[{key:"events",value:function(){var e=this;jQuery((function(){e.colorPicker()})),jQuery(document).on("pp-widget-added",(function(){e.colorPicker()}))}},{key:"colorPicker",value:function(){var e={change:function(e,t){jQuery(e.target).val(t.color.toString()),jQuery(e.target).trigger("change")}},t=jQuery(".pp-color-picker").not('[id*="__i__"]');t.wpColorPicker(e),t.each((function(){var e=jQuery(this);e.closest(".wp-picker-container").find(".wp-picker-clear").on("click",(function(){e.val("").trigger("change")}))}))}}],t&&g(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function w(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_(n.key),n)}}function _(e){var t=function(e){if("object"!=k(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=k(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}var x=function(){return e=function e(t,o,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.adminData=window.ppjsAdmin||{},this.wrapper=t,this.fetchMethod=o,this.isReset=n,this.adminData.ispremium&&this.runFetchAction()},(t=[{key:"runFetchAction",value:function(){var e=this.getAjaxData();!1===e?this.runFalseAction():(this.hideLists(),this.makeAjaxRequest(e))}},{key:"runFalseAction",value:function(e){this.hideLists(),e&&console.log(e)}},{key:"hideLists",value:function(){this.wrapper.find(".pp-episodes-list").hide(),"feed"===this.fetchMethod&&this.isReset&&(this.wrapper.find(".pp-categories-list").hide(),this.wrapper.find(".pp-seasons-list").hide())}},{key:"getAjaxData",value:function(){return"feed"===this.fetchMethod?this.getFeedAjaxData():"post"===this.fetchMethod?this.getPostAjaxData():void 0}},{key:"getFeedAjaxData",value:function(){var e=this.wrapper.find(".feed_url input").val();if(!(e="string"==typeof e&&e.trim()))return!1;var t=this.adminData.security,o=this.isReset?"true":"false",n=this.wrapper.find('.pp_slist-checklist input[type="checkbox"]:checked'),r=this.wrapper.find('.pp_catlist-checklist input[type="checkbox"]:checked'),i=[],s=[];return this.isReset||(jQuery.each(n,(function(){i.push(jQuery(this).val())})),jQuery.each(r,(function(){s.push(jQuery(this).val())}))),{action:"pp_feed_data_list",security:t,getAll:o,feedUrl:e,seasons:i,categories:s}}},{key:"getPostAjaxData",value:function(){var e=this.adminData.security,t=this.wrapper.find("select.podcast-player-pp-post-type").val(),o=this.wrapper.find("select.podcast-player-pp-taxonomy").val(),n=this.wrapper.find("select.podcast-player-sortby").val(),r=this.wrapper.find(".filterby input").val(),i=this.wrapper.find('.pp_terms-checklist input[type="checkbox"]:checked'),s=[];return jQuery.each(i,(function(){s.push(jQuery(this).val())})),{action:"pp_post_episodes_list",security:e,postType:t,taxonomy:o,sortby:n,filterby:r,terms:s}}},{key:"makeAjaxRequest",value:function(e){var t=this,o=this.adminData.ajaxurl;jQuery.ajax({url:o,data:e,type:"POST",timeout:1e4,success:function(e){var o=JSON.parse(e);jQuery.isEmptyObject(o)?t.runFalseAction("PP Error: Empty object received"):o.items?t.createMarkup(o):o.error&&t.runFalseAction(o.error)},error:function(e,o,n){t.runFalseAction(n)}})}},{key:"createMarkup",value:function(e){e.items&&(this.template("episode","elist",e.items),this.wrapper.find(".pp-episodes-list").show()),e.seasons&&(this.template("season","slist",e.seasons),this.wrapper.find(".pp-seasons-list").show()),e.categories&&(this.template("cat","catlist",e.categories),this.wrapper.find(".pp-categories-list").show())}},{key:"template",value:function(e,t,o){this.wrapper.find(".d-".concat(e,' input[type="checkbox"]')).prop("checked",!0);var n=this.wrapper.find(".pp_".concat(t,"-checklist ul")),r=n.find("li.d-".concat(e)).clone();n.empty().append(r.clone()),r.removeClass("d-".concat(e)).addClass("pp-".concat(e,"s")),r.find('input[type="checkbox"]').prop("checked",!1).attr("disabled",!0),jQuery.each(o,(function(e,t){var o=r.clone();o.find('input[type="checkbox"]').val(e),o.find(".cblabel").html(t),n.append(o)}))}}])&&w(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const Q=x,S={ajaxtimeout:null};function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}function O(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T(n.key),n)}}function T(e){var t=function(e){if("object"!=P(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=P(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==P(t)?t:t+""}var F=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events()},t=[{key:"events",value:function(){var e=this;jQuery("#pp-options-module-shortcode").on("change",".podcast-player-pp-fetch-method",(function(){e.changeFetchMethod(jQuery(this))}))}},{key:"changeFetchMethod",value:function(e){var t=e.closest(".pp-shortcode-form, .pp-shortcode-form"),o=e.val(),n=t.find(".podcast-player-pp-aspect-ratio"),r=["lv1","gv1",""],i=""===t.find(".podcast-player-pp-teaser-text").val(),s=["lv1","lv2","gv1","gv2"],p=t.find("select.podcast-player-pp-display-style").val(),a=[".feed_url",".pp_hide_content",".pp_slist",".pp_catlist",".pp-feedback-toggle"],c=[".pp_post_type",".pp_taxonomy",".pp_podtitle"],u=[".pp_audiosrc",".pp_audiotitle",".pp_audiolink",".pp_ahide_download",".pp_ahide_social",".pp-lshow-toggle",".pp-linfo-toggle"],l=[".pp_elist",".pp-filter-toggle",".pp-show-toggle",".pp_txtcolor",".number.pp-widget-option",".offset.pp-widget-option",".pp_grid_columns",".pp_crop_method",".pp_aspect_ratio"];t.find("select.podcast-player-pp-taxonomy").val(""),t.find(".toggle-active").removeClass("toggle-active"),t.find([".pp_settings-content",".pp_terms"].join(",")).hide(),"feed"===o?(t.find(a.join(",")).show(),t.find(c.join(",")).hide(),t.find(u.join(",")).hide(),t.find(l.join(",")).show()):"post"===o?(t.find(a.join(",")).hide(),t.find(c.join(",")).show(),t.find(u.join(",")).hide(),t.find(l.join(",")).show()):"link"===o&&(t.find(a.join(",")).hide(),t.find(c.join(",")).hide(),t.find(u.join(",")).show(),t.find(l.join(",")).hide()),"feed"!==o&&"post"!==o||(clearTimeout(S.ajaxtimeout),S.ajaxtimeout=setTimeout((function(){new Q(t,o,!0)}),500)),"feed"===o||"post"===o?(t.find(".pp_teaser_text").toggle(r.includes(p)),t.find(".pp_excerpt_length").toggle(r.includes(p)&&i),t.find(".pp_excerpt_unit").toggle(r.includes(p)&&i),t.find(".pp_txtcolor").toggle(["lv1","lv2","lv3","gv1"].includes(p)),t.find(".pp_grid_columns").toggle(["gv1","gv2"].includes(p)),t.find(".pp_crop_method").toggle(s.includes(p)&&!!n.val()),t.find(".pp_aspect_ratio").toggle(s.includes(p))):t.find(".pp_teaser_text, .pp_excerpt_length, .pp_excerpt_unit").hide()}}],t&&O(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const C=F;function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function E(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,A(n.key),n)}}function A(e){var t=function(e){if("object"!=R(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=R(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}var D=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events()},t=[{key:"events",value:function(){var e=this,t=jQuery("#pp-options-module-shortcode");jQuery(document),t.on("change",".podcast-player-pp-post-type",(function(){e.postType(jQuery(this))})),t.on("change",".podcast-player-pp-taxonomy",(function(){e.taxonomy(jQuery(this))})),t.on("change",".podcast-player-pp-furl-select",(function(){var e=jQuery(this),t=e.val();e.siblings(".pp_feed-url").val(t).trigger("change").trigger("input")})),t.on("input",".feed_url input",(function(){e.feedUrl(jQuery(this))})),t.on("change",".podcast-player-pp-display-style",(function(){e.displayStyle(jQuery(this))})),t.on("change",".podcast-player-pp-aspect-ratio",(function(){e.aspectRatio(jQuery(this))})),t.on("change",".podcast-player-pp-start-when",(function(){e.startWhen(jQuery(this))})),t.on("change",'.d-episode input[type="checkbox"]',(function(){var t=jQuery(this),o=t.closest(".pp_elist").next(".pp_edisplay");e.filterCheckboxes(t,"episode"),t.is(":checked")?o.hide():o.show()})),t.on("change",'.d-season input[type="checkbox"]',(function(){e.filterCheckboxes(jQuery(this),"season")})),t.on("change",'.d-cat input[type="checkbox"]',(function(){e.filterCheckboxes(jQuery(this),"cat")})),t.on("change",'.pp_hide_header input[type="checkbox"]',(function(){e.hideHeader(jQuery(this))})),t.on("change",'.pp_terms-checklist input[type="checkbox"], .filterby input',(function(){e.postFetch(jQuery(this))})),t.on("change",'.pp_slist-checklist input[type="checkbox"], .pp_catlist-checklist input[type="checkbox"]',(function(){e.feedFetch(jQuery(this),!1)})),t.on("change","select.podcast-player-podcast-menu",(function(){e.toggleMenuItems(jQuery(this))})),t.on("change",'.main_menu_items input[type="number"]',(function(){e.toggleDepricatedSub(jQuery(this))})),t.on("change",".podcast-player-pp-teaser-text",(function(){e.toggleExcerptOptions(jQuery(this))})),t.on("change",'.pp_collect_feedback input[type="checkbox"]',(function(){e.toggleFeedbackOptions(jQuery(this))}))}},{key:"widgetAdded",value:function(e){if(e.hasClass("pp-filter-toggle")){var t=e.next(".pp_settings-content");t.find('.d-episode input[type="checkbox"]').is(":checked")&&t.find('.pp-episodes input[type="checkbox"]').attr("disabled",!0),t.find('.d-cat input[type="checkbox"]').is(":checked")&&t.find('.pp-cats input[type="checkbox"]').attr("disabled",!0),t.find('.d-season input[type="checkbox"]').is(":checked")&&t.find('.pp-seasons input[type="checkbox"]').attr("disabled",!0)}}},{key:"settingsToggle",value:function(e){e.next(".pp_settings-content").slideToggle("fast"),e.toggleClass("toggle-active")}},{key:"postType",value:function(e){var t=e.val(),o=e.closest(".pp-shortcode-form").find(".podcast-player-pp-taxonomy");o.find("option").hide(),o.find(".always-visible, ."+t).show(),o.val(""),this.postFetch(e)}},{key:"taxonomy",value:function(e){var t=e.val(),o=e.closest(".pp-shortcode-form").find(".pp_terms");o.find(".pp_terms-checklist input:checkbox").removeAttr("checked"),o.hide(),t&&(o.find(".pp_terms-checklist li").hide(),o.find(".pp_terms-checklist ."+t).show(),o.show()),this.postFetch(e)}},{key:"feedUrl",value:function(e){this.resetAutoFilters(),e.val()&&this.feedFetch(e,!0)}},{key:"aspectRatio",value:function(e){e.val()?e.closest(".pp-shortcode-form").find(".pp_crop_method").show():e.closest(".pp-shortcode-form").find(".pp_crop_method").hide()}},{key:"toggleExcerptOptions",value:function(e){e.val()?e.closest(".pp-shortcode-form").find(".pp_excerpt_length, .pp_excerpt_unit").hide():e.closest(".pp-shortcode-form").find(".pp_excerpt_length, .pp_excerpt_unit").show()}},{key:"startWhen",value:function(e){var t=e.val();t&&"custom"===t?e.closest(".pp-shortcode-form").find(".pp_start_time").show():e.closest(".pp-shortcode-form").find(".pp_start_time").hide()}},{key:"resetAutoFilters",value:function(){this.filterCheckboxes(jQuery('.d-episode input[type="checkbox"]'),"episode"),this.filterCheckboxes(jQuery('.d-season input[type="checkbox"]'),"season"),this.filterCheckboxes(jQuery('.d-cat input[type="checkbox"]'),"cat")}},{key:"filterCheckboxes",value:function(e,t){var o=e.closest(".pp-shortcode-form"),n=".pp-".concat(t,"s");e.is(":checked")?o.find(n+' input[type="checkbox"]').attr("disabled",!0).prop("checked",!1):o.find(n+' input[type="checkbox"]').attr("disabled",!1)}},{key:"hideHeader",value:function(e){var t=e.closest(".pp-shortcode-form");e.is(":checked")?t.find(".pp_hide_cover, .pp_hide_title, .pp_hide_description, .pp_hide_subscribe").hide():t.find(".pp_hide_cover, .pp_hide_title, .pp_hide_description, .pp_hide_subscribe").show()}},{key:"displayStyle",value:function(e){var t=e.val(),o=e.closest(".pp-shortcode-form"),n=o.find(".podcast-player-pp-aspect-ratio"),r=["lv1","gv1",""],i=["lv1","lv2","gv1","gv2"],s=""===o.find(".podcast-player-pp-teaser-text").val();o.find(".pp_no_scroll").toggle(!t||"modern"===t),o.find(".pp_header_default").toggle(!t||"legacy"===t||"modern"===t),o.find(".pp_list_default").toggle(!t||"legacy"===t||"modern"===t),o.find(".pp_teaser_text").toggle(r.includes(t)),o.find(".pp_excerpt_length").toggle(r.includes(t)&&s),o.find(".pp_excerpt_unit").toggle(r.includes(t)&&s),o.find(".pp_grid_columns").toggle(["gv1","gv2"].includes(t)),o.find(".pp_txtcolor").toggle(["lv1","lv2","lv3","gv1"].includes(t)),o.find(".pp_crop_method").toggle(i.includes(t)&&!!n.val()),o.find(".pp_aspect_ratio").toggle(i.includes(t))}},{key:"postFetch",value:function(e){this.fetch(e.closest(".pp-shortcode-form"),"post")}},{key:"feedFetch",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.fetch(e.closest(".pp-shortcode-form"),"feed",t)}},{key:"fetch",value:function(e,t){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];"feed"!==t&&"post"!==t||(clearTimeout(S.ajaxtimeout),S.ajaxtimeout=setTimeout((function(){new Q(e,t,o)}),500))}},{key:"toggleMenuItems",value:function(e){var t=e.val(),o=e.closest(".podcast_menu").next(".main_menu_items");t||o.hide()}},{key:"toggleDepricatedSub",value:function(e){var t=e.val(),o=e.closest(".main_menu_items").siblings(".pp_apple_sub, .pp_google_sub, .pp_spotify_sub");t>0?o.hide():o.show()}},{key:"toggleFeedbackOptions",value:function(e){var t=e.closest(".pp-shortcode-form");e.is(":checked")?t.find(".pp_show_form_time, .pp_feedback_text, .pp_positive_text, .pp_positive_url, .pp_negative_text, .pp_negative_form").show():t.find(".pp_show_form_time, .pp_feedback_text, .pp_positive_text, .pp_positive_url, .pp_negative_text, .pp_negative_form").hide()}}],t&&E(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();const N=D;new r,new a,new d,new v,jQuery((function(){new j,new C,new N}))})();